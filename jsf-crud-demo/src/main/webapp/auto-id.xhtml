<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:crud="urn:be:e-contract:crud:jsf"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>JSF CRUD Demo</title>
    </h:head>

    <h:body>
        <h1>JSF CRUD Demo</h1>
        <p:growl widgetVar="growl"/>
        <crud:crud entity="AutoIdEntity" title="A fancy title!" orderBy="amount">
            <crud:create/>
            <crud:read/>
            <crud:update disabled="false"/>
            <crud:delete deleteAll="true" title="Custom delete title">
                <crud:entity var="entity">
                    <h:outputText value="Custom delete message for #{crud:toHumanReadable(entity)}"/>
                </crud:entity>
            </crud:delete>
            <crud:createListener action="#{demoController.created}"/>
            <crud:updateListener action="#{demoController.updated}"/>
            <crud:deleteListener action="#{demoController.deleted}"/>
            <crud:field name="id" sort="true"/>
            <crud:field name="created" label="Creation Date"/>
            <crud:field name="threeValuedLogic" hide="true"/>
            <crud:field name="description" filter="true"/>
            <crud:property name="myProperty" sort="true" filter="true"/>
            <crud:action value="Custom Action" action="#{demoController.action}"/>
            <crud:action value="Action 2" action="#{demoController.messagingAction}"
                         oncomplete="PF('growl').renderMessage({'summary':'hello world'})"/>
            <crud:action value="Increase amount" action="#{demoController.increaseAmount}" rendered="#{row.amount lt 500}"/>
            <crud:action value="Custom Dialog" oncomplete="PF('customDialog').show()"
                         update=":customDialog"/>
        </crud:crud>

        <p:dialog id="customDialog" widgetVar="customDialog" header="Custom Dialog">
            <crud:entity var="entity">
                <h:form>
                    <h:panelGrid columns="1">
                        <h:outputText value='Custom action on #{entity.id} ?'/>
                    </h:panelGrid>
                    <h:panelGrid columns="2">
                        <p:commandButton value="Action" action="#{demoController.action(entity)}"
                                         oncomplete="PF('customDialog').hide()"/>
                        <crud:dismissButton/>
                    </h:panelGrid>
                </h:form>
            </crud:entity>
        </p:dialog>

        <crud:crud entity="DemoEntity">
            <crud:action value="Navigation Action" action="#{demoController.navigationAction}"/>
        </crud:crud>

        <h:form>
            <p:commandLink action="/index?faces-redirect=true" value="Back"/>
        </h:form>
    </h:body>

</html>