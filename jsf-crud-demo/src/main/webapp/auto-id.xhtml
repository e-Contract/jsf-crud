<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:crud="urn:be:e-contract:crud:jsf"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>JSF CRUD Demo</title>
    </h:head>

    <h:body>
        <h1>JSF CRUD Demo</h1>
        <p:growl widgetVar="growl"/>
        <crud:crud entity="AutoIdEntity" title="A fancy title!" orderBy="amount" ordering="DESC" id='crud'>
            <crud:create>
                <crud:field name="amount" hide="true"/>
            </crud:create>
            <crud:read/>
            <crud:update disabled="false">
                <crud:field name="amount" hide="false"/>
            </crud:update>
            <crud:delete deleteAll="true" title="Custom delete title">
                <crud:entity var="entity">
                    <h:outputText value="Custom delete message for #{crud:toHumanReadable(entity)}"/>
                </crud:entity>
            </crud:delete>
            <crud:createListener action="#{demoController.created}"/>
            <crud:updateListener action="#{demoController.updated}"/>
            <crud:deleteListener action="#{demoController.deleted}"/>
            <crud:field name="id" sort="true"/>
            <crud:field name="created" label="Creation Date"/>
            <crud:field name="threeValuedLogic" hide="true"/>
            <crud:field name="description" filter="true" size="60"/>
            <crud:field name="dateOfBirth" required="true"/>
            <crud:field name="password" password="true"/>
            <crud:field name="textFile">
                <crud:binary contentType="text/plain"/>
            </crud:field>
            <crud:property name="myProperty" sort="true" filter="true"/>
            <crud:action value="Custom Action" action="#{demoController.action}"/>
            <crud:action value="Action 2" action="#{demoController.messagingAction}"
                         oncomplete="PF('growl').renderMessage({'summary':'hello world'})"/>
            <crud:action value="Increase amount" action="#{demoController.increaseAmount}" rendered="#{row.amount lt 500}"/>
            <crud:action value="Custom Dialog" oncomplete="PF('customDialog').show()"
                         update=":customDialog" icon="fa fa-plus"/>
            <crud:globalAction value="Custom Global Action" icon="fa fa-plus" action="#{demoController.globalAction}"/>
            <crud:globalAction value="Global Action Dialog" oncomplete="PF('globalActionDialog').show()"/>
        </crud:crud>

        <p:dialog id="customDialog" widgetVar="customDialog" header="Custom Dialog">
            <crud:entity var="entity">
                <h:form>
                    <h:panelGrid columns="2">
                        <h:outputText value="Entity"/>
                        <h:outputText value='#{entity.id}'/>

                        <h:outputText value="Add amount"/>
                        <p:inputText value="#{demoController.amount}"/>
                    </h:panelGrid>
                    <h:panelGrid columns="2">
                        <crud:saveButton action="#{demoController.addAmount}" value="Add amount"/>
                        <crud:dismissButton value="Close"/>
                    </h:panelGrid>
                </h:form>
            </crud:entity>
        </p:dialog>

        <p:dialog id='globalActionDialog' widgetVar='globalActionDialog' header='Global Action Dialog'>
            <h:form>
                <p:commandButton oncomplete="PF('globalActionDialog').hide()" action="#{demoController.deleteAll}" value='Delete all'>
                    <crud:reset target=":crud"/>
                </p:commandButton>
            </h:form>
        </p:dialog>

        <crud:crud entity="DemoEntity">
            <crud:action value="Navigation Action" action="#{demoController.navigationAction}"/>
        </crud:crud>

        <crud:crud entity="DemoEntity" sort="true">
            <crud:field name="description" sort="false"/>
        </crud:crud>

        <h:form>
            <p:commandLink action="/index?faces-redirect=true" value="Back"/>
        </h:form>
    </h:body>

</html>