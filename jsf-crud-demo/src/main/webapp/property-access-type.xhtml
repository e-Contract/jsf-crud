<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:crud="urn:be:e-contract:crud:jsf"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>JSF CRUD Demo</title>
    </h:head>

    <h:body>
        <h1>JSF CRUD Demo</h1>
        <crud:crud entity="PropertyAccessTypeEntity">
            <crud:action value="Update Description" oncomplete="PF('customDialog').show()" update=":customDialog"/>
            <crud:globalAction value="Custom Dialog Facet">
                <f:facet name="dialog">
                    <h:form>
                        <h:outputText value="Custom Dialog"/>
                        <h:panelGrid columns="1">
                            <crud:dismissButton/>
                        </h:panelGrid>
                    </h:form>
                </f:facet>
                <f:facet name="dialogTitle">
                    Custom Dialog Title
                </f:facet>
            </crud:globalAction>
        </crud:crud>
        <h:form>
            <p:commandLink action="/index?faces-redirect=true" value="Back"/>
        </h:form>
    </h:body>

    <p:dialog id='customDialog' widgetVar="customDialog" header="Update description" modal="true">
        <h:form>
            <crud:entity var="entity">
                <h:panelGrid columns="3">
                    <p:outputLabel for='description' value="Description"/>
                    <p:inputText id="description" value='#{entity.description}' required="true"/>
                    <p:message for='description'/>
                </h:panelGrid>
                <h:panelGrid columns="2">
                    <crud:saveButton icon="fa fa-save"/>
                    <crud:dismissButton icon="fa fa-remove"/>
                </h:panelGrid>
            </crud:entity>
        </h:form>
    </p:dialog>

</html>